"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[1386],{14736:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>l,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"designing-studies/dynamic-blocks","title":"Dynamic Blocks","description":"Some studies require knowledge of the participant\'s responses to previous questions to determine the next component that is shown. For example, if a participant answers a question incorrectly, they may be shown a simpler task next. Alternatively, if a participant answers a question correctly, they may be shown a more difficult task next. This is a common feature in adaptive testing, where the difficulty of the questions adapts to the participant\'s performance.","source":"@site/docs/designing-studies/dynamic-blocks.md","sourceDirName":"designing-studies","slug":"/designing-studies/dynamic-blocks","permalink":"/docs/designing-studies/dynamic-blocks","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Study Sequence","permalink":"/docs/designing-studies/study-sequences"},"next":{"title":"Provenance Tracking","permalink":"/docs/designing-studies/provenance-tracking"}}');var i=t(74848),o=t(28453);const a={},r="Dynamic Blocks",c={},d=[];function h(e){const n={code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"dynamic-blocks",children:"Dynamic Blocks"})}),"\n",(0,i.jsx)(n.p,{children:"Some studies require knowledge of the participant's responses to previous questions to determine the next component that is shown. For example, if a participant answers a question incorrectly, they may be shown a simpler task next. Alternatively, if a participant answers a question correctly, they may be shown a more difficult task next. This is a common feature in adaptive testing, where the difficulty of the questions adapts to the participant's performance."}),"\n",(0,i.jsxs)(n.p,{children:["In reVISit, this can be achieved using dynamic blocks. Dynamic blocks are blocks that use a function to calculate what the next component will be. This function is a typescript/javascript function that is defined in the ",(0,i.jsx)(n.code,{children:"src/public/study-name/"})," folder and is referenced in the study configuration file like so:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'"sequence": {\n  "order": "fixed",\n  "components": [\n    "introduction",\n    {\n      "id": "dynamicBlock",\n      "type": "dynamic",\n      "functionPath": "study-name/dynamic.ts",\n      "parameters": {\n        "param1": "value1",\n        "param2": "value2"\n      }\n    },\n    "post-study-survey"\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In this example, the ",(0,i.jsx)(n.code,{children:"dynamicBlock"})," component is a dynamic block that uses the function defined in ",(0,i.jsx)(n.code,{children:"src/public/study-name/dynamic.ts"})," to determine the next component. The ",(0,i.jsx)(n.code,{children:"parameters"})," field is used to pass any parameters to the function."]}),"\n",(0,i.jsxs)(n.p,{children:["The function in ",(0,i.jsx)(n.code,{children:"src/public/study-name/dynamic.ts"})," uses the following types provided by reVISit:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"export default function dynamicFunction({ components, answers, sequenceSorFar, customParameters } : JumpFunctionParameters<T>): JumpFunctionReturnVal\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Where ",(0,i.jsx)(n.code,{children:"JumpFunctionParameters"})," is defined as:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"export interface JumpFunctionParameters<T> {\n  components: (string | ComponentBlock)[],\n  answers: ParticipantData['answers'],\n  sequenceSoFar: string[],\n  customParameters: T\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["And ",(0,i.jsx)(n.code,{children:"JumpFunctionReturnVal"})," is defined as:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"export interface JumpFunctionReturnVal {\n  component: string | null,\n  parameters?: Record<string, any>,\n  correctAnswer?: Answer[],\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"components"})," field is an array of all the components in the study. The ",(0,i.jsx)(n.code,{children:"answers"})," field is an object that contains the participant's answers to all the questions so far. The ",(0,i.jsx)(n.code,{children:"sequenceSoFar"})," field is an array of the ids of the components that have been shown so far. The ",(0,i.jsx)(n.code,{children:"customParameters"})," field is an object that contains any parameters passed to the function from the study configuration file."]}),"\n",(0,i.jsx)(n.p,{children:"The function should return an object with the following fields:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"component"}),": The id of the next component to show. If this is ",(0,i.jsx)(n.code,{children:"null"}),", the study will exit the dynamic block and continue with the next component in the sequence."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"parameters"})," (optional): Any parameters to pass to the next component. This is useful for passing information from the dynamic block to the next component to control how the next component renders. For example, you could"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"correctAnswer"})," (optional): An array of correct answers to the questions that have been asked so far. This is used to calculate the participant's score at the end of the study."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"It is required that the function you provide is deterministic, and has no randomness. This is because the function will be run multiple times during the study, and the same inputs should always produce the same outputs."}),"\n",(0,i.jsx)(n.p,{children:"Here is an example of a dynamic function that shows a different component based on the participant's answers:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import { JumpFunctionParameters, JumpFunctionReturnVal } from '../../store/types';\n\nexport default function func({ answers } : JumpFunctionParameters<{name: string}>) : JumpFunctionReturnVal {\n  const topAnswerLength = Object.entries(answers)\n    .filter(([_, value]) => value.endTime > -1)\n    .length;\n\n  if (topAnswerLength === 5) {\n    return { component: null };\n  }\n\n  return { component: 'reactComponent', parameters: { n: topAnswerLength || 0 } };\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In this example, the function checks how many questions the participant has answered so far. If the participant has answered 5 questions, the function returns ",(0,i.jsx)(n.code,{children:"null"}),", which exits the dynamic block. Otherwise, the function returns the id of the next component to show, along with any parameters to pass to the component. In this case, the ",(0,i.jsx)(n.code,{children:"reactComponent"})," component is shown, and the parameter ",(0,i.jsx)(n.code,{children:"n"})," is passed to the component with the value of the number of questions the participant has answered so far."]})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var s=t(96540);const i={},o=s.createContext(i);function a(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);