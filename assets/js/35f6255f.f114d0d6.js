"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[1913],{5371:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});var s=n(4848),i=n(8453);const a={sidebar_position:3},o="Setting Up Your First Study",r={id:"getting-started/tutorial-questionnaire",title:"Setting Up Your First Study",description:"Basic Questionnaire Study",source:"@site/versioned_docs/version-v1.0.0-beta11/getting-started/tutorial-questionnaire.md",sourceDirName:"getting-started",slug:"/getting-started/tutorial-questionnaire",permalink:"/docs/v1.0.0-beta11/getting-started/tutorial-questionnaire",draft:!1,unlisted:!1,tags:[],version:"v1.0.0-beta11",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"docs",previous:{title:"Installation",permalink:"/docs/v1.0.0-beta11/getting-started/installation"},next:{title:"Tutorials",permalink:"/docs/v1.0.0-beta11/category/tutorials"}},c={},l=[{value:"Basic Questionnaire Study",id:"basic-questionnaire-study",level:2},{value:"Adding custom HTML",id:"adding-custom-html",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"setting-up-your-first-study",children:"Setting Up Your First Study"}),"\n",(0,s.jsx)(t.h2,{id:"basic-questionnaire-study",children:"Basic Questionnaire Study"}),"\n",(0,s.jsx)(t.p,{children:"Let's start with setting up a simple questionnaire study."}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsx)(t.p,{children:"It is easiest to perform the following tutorial with an IDE. We suggest something like VSCode since it has JSON autocomplete."})}),"\n",(0,s.jsx)(t.p,{children:'You\u2019ll see that the repository consists of many high level directories. For this tutorial, we will solely be working with the \u201cpublic\u201d directory. Start by making a new directory called \u201cbasic-questionnaire-study\u201d in the "public" directory. Inside this folder, create another directory called "assets". The assets directory will be where all of our various components are held.'}),"\n",(0,s.jsx)(t.p,{children:"Once that is done, we will make an \u201cintroduction\u201d markdown file. This will be used as the introduction to the study for your users."}),"\n",(0,s.jsx)(t.p,{children:"Create a file with the following contents:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-markdown",children:"# Introduction\n\nWelcome to our study. This is a basic questionnaire study. We will only ask you a few questions and then we will be done.\n"})}),"\n",(0,s.jsx)(t.p,{children:"Save this file as \u201cintroduction.md in the \u201cbasic-questionnaire-study/assets\u201d directory. Next, let\u2019s create a \u201chelp\u201d file. This will be used so that any user who needs help during the study will be able to read this markdown page."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-markdown",children:"# Help\n\nThis is a questionnaire. For each question, be sure to provide and answer and then click **Next** when you\u2019re ready to move onto the next question.\n"})}),"\n",(0,s.jsx)(t.p,{children:"Save this file as \u201chelp.md in the \u201cbasic-questionnaire-study/assets\u201d directory."}),"\n",(0,s.jsx)(t.p,{children:"Now we are ready to create the configuration file for the study. This configuration defines how our study is laid out, provides some basic information about yourself (the creator), and describes which components will be added to the study."}),"\n",(0,s.jsx)(t.p,{children:"Create a new file called \u201cconfig.json\u201d. Then, copy and paste the following json into the new file."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'{\n    "$schema": "https://raw.githubusercontent.com/reVISit-studies/study/main/src/parser/StudyConfigSchema.json",\n    "studyMetadata": {\n        "title": "Basic Questionnaire Study",\n        "version": "pilot",\n        "authors": [\n            "The reVISit Team"\n        ],\n        "date": "2024-03-19",\n        "description": "A simple questionnaire study",\n        "organizations": [\n            "University of Utah",\n            "WPI",\n            "University of Toronto"\n        ]\n    },\n    "uiConfig": {\n        "contactEmail": "test@test.com",\n        "helpTextPath": "basic-questionnaire-study/assets/help.md",\n        "logoPath": "revisitAssets/revisitLogoSquare.svg",\n        "withProgressBar": true,\n        "autoDownloadStudy": false,\n        "sidebar": true\n    },\n    "components": {\n        "introduction": {\n            "type": "markdown",\n            "path": "basic-questionnaire-study/assets/introduction.md",\n            "response": []\n        },\n        "first-question-set": {\n            "type": "questionnaire",\n            "response": [\n                {\n                    "id": "q1",\n                    "prompt": "What is your first name?",\n                    "required": true,\n                    "location": "aboveStimulus",\n                    "type": "longText",\n                    "placeholder": "Please enter your first name"\n                },\n                {\n                    "id": "q2",\n                    "prompt": "What is your favorite color?",\n                    "required": true,\n                    "location": "aboveStimulus",\n                    "type": "dropdown",\n                    "placeholder": "Please choose your favorite color",\n                    "options": [\n                        {\n                            "label": "Red",\n                            "value": "red"\n                        },\n                        {\n                            "label": "Blue",\n                            "value": "blue"\n                        },\n                        {\n                            "label": "My favorite color is not shown here.",\n                            "value": "notShown"\n                        }\n                    ]\n                }\n            ]\n        },\n        "second-question-set": {\n            "type": "questionnaire",\n            "response": [\n                {\n                    "id": "q1",\n                    "prompt": "What would you rate your satisfaction of this survey? 0 being very un-enjoyable, 5 being very enjoyable.",\n                    "required": true,\n                    "location": "aboveStimulus",\n                    "type": "numerical",\n                    "min": 0,\n                    "max": 5\n                }\n            ]\n        }\n    },\n    "sequence": {\n        "order": "fixed",\n        "components": [\n            "introduction",\n            "first-question-set",\n            "second-question-set"\n        ]\n    }\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:'Save this file in the \u201cbasic-questionnaire-study\u201d directory -- one level above the "basic-questionnaire-study/assets" directory.'}),"\n",(0,s.jsx)(t.p,{children:'Now, our study is almost set up to view. The last step is to make sure that the \u201cglobal.json\u201d file is set to find this new study. Open the "global.json" file in the "public" directory.'}),"\n",(0,s.jsx)(t.p,{children:"Add the following code to the \u201cconfigs\u201d object:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"\u201cbasic-questionnaire-study\u201d: {\n\t\u201cpath\u201d: \u201dbasic-questionnaire-study/config.json\u201d\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:'After this, add \u201cbasic-questionnaire-study\u201d into the \u201cconfigsList\u201d list in the same file. It does not matter where "basic-questionnaire-study" appears in the configs list. Because the configs list is ordered, however, placing "basic-questionnaire-study" at the bottom of the list will mean that the study will show up at the bottom of the list of studies in the UI.'}),"\n",(0,s.jsxs)(t.p,{children:["Now, if you start the server (using ",(0,s.jsx)(t.code,{children:"yarn serve"})," as described in the ",(0,s.jsx)("a",{href:"#installation",children:"Installation"})," section), you'll be able to navigate to \"",(0,s.jsx)(t.a,{href:"http://localhost:8080/",children:"http://localhost:8080/"}),'" and view your study in the list of studies. Alternatively, you can navigate to "',(0,s.jsx)(t.a,{href:"http://localhost:8080/basic-questionnaire-study",children:"http://localhost:8080/basic-questionnaire-study"}),'" to enter the study directly.']}),"\n",(0,s.jsx)(t.h2,{id:"adding-custom-html",children:"Adding custom HTML"}),"\n",(0,s.jsx)(t.p,{children:"Now, we will take the study we just created and add another component based on a user-created HTML file. This allows for some additional customization of the component."}),"\n",(0,s.jsx)(t.p,{children:"The HTML code below uses the extensive D3.js library. It renders a simple, horizontal bar chart. Copy and paste this HTML into a document called \u201cbar-chart.html\u201d in the \u201cbasic-questionnaire-study/assets\u201d directory."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-html",children:"<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <title>D3 Nice Axes</title>\n    <script src=\"https://d3js.org/d3.v7.js\"><\/script>\n    \x3c!-- Load revisit-communicate to be able to send data to reVISit --\x3e\n    <script src=\"../../revisitUtilities/revisit-communicate.js\"><\/script>\n  </head>\n\n  <body>\n    <svg></svg>\n  </body>\n\n  <script>\n    // Get data from the config file\n    Revisit.onDataReceive((data) => {\n      const barData = data['barData']\n      const taskID = 'barChart';\n      const loc = 'belowStimulus';\n      height = 400;\n      width = 750;\n      padding = 25;\n      svg = d3.select('svg');\n      svg\n        .attr('width', width + 2 * padding)\n        .attr('height', height + 2 * padding);\n\n      let spacing = height / barData.length;\n\n      let min = d3.min(barData);\n      let max = d3.max(barData);\n\n      let xScale = d3.scaleLinear().domain([min, max]).range([0, width]).nice();\n\n      let color = d3\n        .scaleLinear()\n        .domain([min, 0, max])\n        .range(['darkred', 'lightgray', 'steelblue']);\n\n      let xAxis = d3.axisBottom();\n      xAxis.scale(xScale);\n\n      svg\n        .selectAll('.bar')\n        .data(barData)\n        .join('rect')\n        .classed('bar', true)\n        .attr('transform', 'translate(' + padding + ',' + padding + ')')\n        .attr('x', (d) => xScale(Math.min(0, d)))\n        .attr('y', (d, i) => i * spacing + 5)\n        .attr('width', (d) => Math.abs(xScale(d) - xScale(0)))\n        .attr('height', 20)\n        .style('fill', (d) => color(d))\n\n        // Post answer from the html to reVISit platform\n        .on('click', (e, d) => {\n          Revisit.postAnswers({\n            [taskID]: d,\n          });\n        });\n\n      svg\n        .append('g')\n        .attr(\n          'transform',\n          'translate(' + padding + ',' + (height + padding) + ')'\n        )\n        .call(xAxis);\n    });\n  <\/script>\n</html>\n"})}),"\n",(0,s.jsx)(t.p,{children:'One of the interesting pieces of the above code is that this HTML document interacts with reVISit in a two-way fashion. Firstly, note that the script to render the bar chart is wrapped in the \u201cRevisit.onDataReceive\u201d function. This listens for data that is passed to the HTML document via the "parameters" key in the configuration of the component. You will see shortly how we can use this HTML document as a template for multiple components with different datasets.'}),"\n",(0,s.jsx)(t.p,{children:"Furthermore, you\u2019ll see that we have also created an \u201conClick\u201d function and attached it to each of the bars in the bar graph. This click function uses the \u201cRevisit.postAnswers\u201d method to send information back to reVISit."}),"\n",(0,s.jsx)(t.p,{children:"Now that we have this HTML document in our study directory, we are ready to adjust our \u201cconfig.json\u201d file to account for these new components."}),"\n",(0,s.jsx)(t.p,{children:"In your \u201cconfig.json\u201d document, create new new key called \u201cbaseComponents\u201d as a sibling to the keys \u201cuiConfig\u201d, \u201ccomponents\u201d, \u201csequence\u201d, etc. In this newly created key, paste the code below:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'    "baseComponents": {\n        "bar-chart": {\n            "type": "website",\n            "response": [\n                {\n                    "id": "barChart",\n                    "prompt": "Your selected answer:",\n                    "required": true,\n                    "location": "belowStimulus",\n                    "type": "iframe"\n                }\n            ],\n            "path": "basic-questionnaire-study/assets/bar-chart.html",\n            "instructionLocation": "aboveStimulus"\n        \n        }\n    }\n'})}),"\n",(0,s.jsx)(t.p,{children:"This creates a component that new components can be based off of. Each component using the \u201cbar-chart\u201d as the value to the \u201cbaseComponent\u201d key will now automatically have the above key-value pairs included. In other words, there is no need to specify the type, response, path, or instruction location when creating these next components."}),"\n",(0,s.jsx)(t.p,{children:"In the components section, add the following objects:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'...\n"bar-chart-1":{\n    "baseComponent": "bar-chart",\n    "description": "A trial for the user to click the largest bar",\n    "instruction": "Click on the largest bar",\n    "parameters": {\n        "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]\n    }\n},\n"bar-chart-2":{\n    "baseComponent": "bar-chart",\n    "description": "A trial for the user to click the smallest bar",\n    "instruction": "Click on the smallest bar",\n    "parameters": {\n        "barData": [1.2, 1.2, 1.2, 1.3, 0.82, 0.4, 0.3]\n    }\n}\n...\n'})}),"\n",(0,s.jsx)(t.p,{children:'The "parameters" key is a dynamically valued key which is used to pass data to your components. When you add the "parameters" key, any data contained within the objet will be sent via the event bus as a message to the component. Since we designed the HTML above to listen for this message, we were able to parse these parameters and use them as variables to control the sizes of the various bar charts.'}),"\n",(0,s.jsx)(t.p,{children:'To finish this tutorial, add these two components ("bar-chart-1" and "bar-chart-2" to the sequence in config.json).'}),"\n",(0,s.jsx)(t.admonition,{type:"warning",children:(0,s.jsx)(t.p,{children:"In order for reVISit to properly identify users without a server and/or an authentication process, it relies on caching the data for a user in that user's browser. Because of this, the new configuration can only be seen when the user clears their browser cache. Whenever you make an update to the configuration file, make sure to clear your cache so that you can view the updated study"})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var s=n(6540);const i={},a=s.createContext(i);function o(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);